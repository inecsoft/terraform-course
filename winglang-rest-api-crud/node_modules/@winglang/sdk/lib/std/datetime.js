"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.Datetime = void 0;
const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
const inflight_1 = require("../core/inflight");
const misc_1 = require("../shared/misc");
/**
 * Represents a local or UTC date object
 * @wingType datetime
 */
class Datetime {
    /**
     * @internal
     */
    static _toInflightType() {
        return inflight_1.InflightClient.forType(__filename, this.name);
    }
    /**
     * Create a Datetime from UTC timezone
     *
     * @returns a new `Datetime` from current time in UTC timezone
     */
    static utcNow() {
        return new Datetime();
    }
    /**
     * Create a Datetime from local system timezone
     *
     * @returns a new `Datetime` from current time in system timezone
     */
    static systemNow() {
        const date = new Date();
        date.setTime(date.getTime() - date.getTimezoneOffset() * 60 * 1000);
        return new Datetime(date, date.getTimezoneOffset());
    }
    /**
     * Create a Datetime from an ISO-8601 string
     *
     * @returns a new `Datetime` in UTC timezone
     * @param iso ISO-8601 string
     */
    static fromIso(iso) {
        return new Datetime(new Date(iso));
    }
    /**
     * Create a Datetime from a JavaScript Date object.
     *
     * @param date The JavaScript Date object.
     * @returns a new `Datetime` instance.
     */
    static fromDate(date) {
        return this.fromIso(date.toISOString());
    }
    /**
     * Create a Datetime from Datetime components
     *
     * @param c DatetimeComponents
     * @returns a new `Datetime`
     */
    static fromComponents(c) {
        const date = new Date(Date.UTC(c.year, c.month, c.day, c.hour, c.min, c.sec, c.ms));
        return new Datetime(date, c.tz);
    }
    constructor(date = new Date(), timezoneOffset = 0) {
        /** @internal */
        this._timezoneOffset = 0;
        this._date = date;
        this._timezoneOffset = timezoneOffset;
    }
    /** @internal */
    _toInflight() {
        return `(require("${(0, misc_1.normalPath)(__filename)}").Datetime.fromIso("${this.toIso()}"))`;
    }
    /**
     * Return a timestamp of non-leap year seconds since epoch
     *
     * @returns a number representing the current timestamp in seconds
     */
    get timestamp() {
        return this.timestampMs / 1000;
    }
    /**
     * Return a timestamp of non-leap year milliseconds since epoch
     *
     * @returns a number representing the current timestamp in milliseconds
     */
    get timestampMs() {
        // since converting between timezones/ declaring a date in a timezone other than the local or UTC
        // isn't native to js, we keep the date in a UTC time, then retrieving back the the original timestamp,
        // this way the date components (hours, month, day, minutes, etc..) are persistent
        // and retrieved in the same order for all of the different constructing methods and the timestamp is correct.
        return this._date.valueOf() + this._timezoneOffset * 60 * 1000;
    }
    /**
     * Returns the hour of the local machine time or in utc
     *
     * @returns a number representing the datetime's hour
     */
    get hours() {
        return this._date.getUTCHours();
    }
    /**
     * Returns the minute of the local machine time or in utc
     *
     * @returns a number representing the datetime's minute
     */
    get min() {
        return this._date.getUTCMinutes();
    }
    /**
     * Returns the seconds of the local machine time or in utc
     *
     * @returns a number representing the datetime's seconds
     */
    get sec() {
        return this._date.getUTCSeconds();
    }
    /**
     * Returns the milliseconds of the local machine time or in utc
     *  *
     * @returns a number representing the datetime's milliseconds
     */
    get ms() {
        return this._date.getUTCMilliseconds();
    }
    /**
     * Returns the day of month in the local machine time or in utc (1 - 31)
     *
     * @returns a number representing the datetime's day of month
     */
    get dayOfMonth() {
        return this._date.getUTCDate();
    }
    /**
     * Returns the day in month of the local machine time or in utc (0 - 6)
     *
     * @returns a number representing the datetime's day of week
     */
    get dayOfWeek() {
        return this._date.getUTCDay();
    }
    /**
     * Returns the month of the local machine time or in utc (0 - 11)
     *
     * @returns a number representing the datetime's month
     */
    get month() {
        return this._date.getUTCMonth();
    }
    /**
     * Returns the year of the local machine time or in utc
     *
     * @returns a number representing the datetime's year
     */
    get year() {
        return this._date.getUTCFullYear();
    }
    /**
     * Returns the offset in minutes from UTC
     *
     * @returns a number representing the datetime's offset in minutes from UTC
     */
    get timezone() {
        return this._timezoneOffset;
    }
    /**
     * Returns a Datetime represents the same date in utc
     *
     * @returns a datetime representing the datetime's date in UTC
     */
    toUtc() {
        return new Datetime(new Date(this.timestampMs));
    }
    /**
     * Returns ISO-8601 string
     *
     * @returns a ISO-8601 string representation of the datetime
     */
    toIso() {
        return new Date(this.timestampMs).toISOString();
    }
}
exports.Datetime = Datetime;
_a = JSII_RTTI_SYMBOL_1;
Datetime[_a] = { fqn: "@winglang/sdk.std.Datetime", version: "0.0.0" };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZXRpbWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc3RkL2RhdGV0aW1lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsK0NBQWtEO0FBQ2xELHlDQUE0QztBQXdDNUM7OztHQUdHO0FBQ0gsTUFBYSxRQUFRO0lBQ25COztPQUVHO0lBQ0ksTUFBTSxDQUFDLGVBQWU7UUFDM0IsT0FBTyx5QkFBYyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3ZELENBQUM7SUFDRDs7OztPQUlHO0lBQ0ksTUFBTSxDQUFDLE1BQU07UUFDbEIsT0FBTyxJQUFJLFFBQVEsRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksTUFBTSxDQUFDLFNBQVM7UUFDckIsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFFcEUsT0FBTyxJQUFJLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQVc7UUFDL0IsT0FBTyxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBVTtRQUMvQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFxQjtRQUNoRCxNQUFN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dCB7IElMaWZ0YWJsZSB9IGZyb20gXCIuL3Jlc291cmNlXCI7XG5pbXBvcnQgeyBJbmZsaWdodENsaWVudCB9IGZyb20gXCIuLi9jb3JlL2luZmxpZ2h0XCI7XG5pbXBvcnQgeyBub3JtYWxQYXRoIH0gZnJvbSBcIi4uL3NoYXJlZC9taXNjXCI7XG5cbi8qKlxuICogSW50ZXJmYWNlIHRoYXQgaXMgdXNlZCBmb3Igc2V0dGluZyBEYXRldGltZSBkYXRlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRGF0ZXRpbWVDb21wb25lbnRzIHtcbiAgLyoqXG4gICAqIFllYXJcbiAgICovXG4gIHJlYWRvbmx5IHllYXI6IG51bWJlcjtcbiAgLyoqXG4gICAqIE1vbnRoXG4gICAqL1xuICByZWFkb25seSBtb250aDogbnVtYmVyO1xuICAvKipcbiAgICogRGF5XG4gICAqL1xuICByZWFkb25seSBkYXk6IG51bWJlcjtcbiAgLyoqXG4gICAqIEhvdXJzXG4gICAqL1xuICByZWFkb25seSBob3VyOiBudW1iZXI7XG4gIC8qKlxuICAgKiBNaW51dGVzXG4gICAqL1xuICByZWFkb25seSBtaW46IG51bWJlcjtcbiAgLyoqXG4gICAqIFNlY29uZHNcbiAgICovXG4gIHJlYWRvbmx5IHNlYzogbnVtYmVyO1xuICAvKipcbiAgICogTWlsbGlzZWNvbmRzXG4gICAqL1xuICByZWFkb25seSBtczogbnVtYmVyO1xuICAvKipcbiAgICogIFRpbWV6b25lIG9mZnNldCBpbiBtaW51dGVzIGZyb20gVVRDXG4gICAqL1xuICByZWFkb25seSB0ejogbnVtYmVyO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBsb2NhbCBvciBVVEMgZGF0ZSBvYmplY3RcbiAqIEB3aW5nVHlwZSBkYXRldGltZVxuICovXG5leHBvcnQgY2xhc3MgRGF0ZXRpbWUgaW1wbGVtZW50cyBJTGlmdGFibGUge1xuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIF90b0luZmxpZ2h0VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBJbmZsaWdodENsaWVudC5mb3JUeXBlKF9fZmlsZW5hbWUsIHRoaXMubmFtZSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGV0aW1lIGZyb20gVVRDIHRpbWV6b25lXG4gICAqXG4gICAqIEByZXR1cm5zIGEgbmV3IGBEYXRldGltZWAgZnJvbSBjdXJyZW50IHRpbWUgaW4gVVRDIHRpbWV6b25lXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHV0Y05vdygpOiBEYXRldGltZSB7XG4gICAgcmV0dXJuIG5ldyBEYXRldGltZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGV0aW1lIGZyb20gbG9jYWwgc3lzdGVtIHRpbWV6b25lXG4gICAqXG4gICAqIEByZXR1cm5zIGEgbmV3IGBEYXRldGltZWAgZnJvbSBjdXJyZW50IHRpbWUgaW4gc3lzdGVtIHRpbWV6b25lXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHN5c3RlbU5vdygpOiBEYXRldGltZSB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAgKiAxMDAwKTtcblxuICAgIHJldHVybiBuZXcgRGF0ZXRpbWUoZGF0ZSwgZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRldGltZSBmcm9tIGFuIElTTy04NjAxIHN0cmluZ1xuICAgKlxuICAgKiBAcmV0dXJucyBhIG5ldyBgRGF0ZXRpbWVgIGluIFVUQyB0aW1lem9uZVxuICAgKiBAcGFyYW0gaXNvIElTTy04NjAxIHN0cmluZ1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmcm9tSXNvKGlzbzogc3RyaW5nKTogRGF0ZXRpbWUge1xuICAgIHJldHVybiBuZXcgRGF0ZXRpbWUobmV3IERhdGUoaXNvKSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZXRpbWUgZnJvbSBhIEphdmFTY3JpcHQgRGF0ZSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSBkYXRlIFRoZSBKYXZhU2NyaXB0IERhdGUgb2JqZWN0LlxuICAgKiBAcmV0dXJucyBhIG5ldyBgRGF0ZXRpbWVgIGluc3RhbmNlLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmcm9tRGF0ZShkYXRlOiBEYXRlKTogRGF0ZXRpbWUge1xuICAgIHJldHVybiB0aGlzLmZyb21Jc28oZGF0ZS50b0lTT1N0cmluZygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRldGltZSBmcm9tIERhdGV0aW1lIGNvbXBvbmVudHNcbiAgICpcbiAgICogQHBhcmFtIGMgRGF0ZXRpbWVDb21wb25lbnRzXG4gICAqIEByZXR1cm5zIGEgbmV3IGBEYXRldGltZWBcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZnJvbUNvbXBvbmVudHMoYzogRGF0ZXRpbWVDb21wb25lbnRzKTogRGF0ZXRpbWUge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShcbiAgICAgIERhdGUuVVRDKGMueWVhciwgYy5tb250aCwgYy5kYXksIGMuaG91ciwgYy5taW4sIGMuc2VjLCBjLm1zKVxuICAgICk7XG5cbiAgICByZXR1cm4gbmV3IERhdGV0aW1lKGRhdGUsIGMudHopO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwcml2YXRlIHJlYWRvbmx5IF9kYXRlOiBEYXRlO1xuICAvKiogQGludGVybmFsICovXG4gIHByaXZhdGUgcmVhZG9ubHkgX3RpbWV6b25lT2Zmc2V0OiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoZGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCksIHRpbWV6b25lT2Zmc2V0ID0gMCkge1xuICAgIHRoaXMuX2RhdGUgPSBkYXRlO1xuICAgIHRoaXMuX3RpbWV6b25lT2Zmc2V0ID0gdGltZXpvbmVPZmZzZXQ7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHB1YmxpYyBfdG9JbmZsaWdodCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgKHJlcXVpcmUoXCIke25vcm1hbFBhdGgoXG4gICAgICBfX2ZpbGVuYW1lXG4gICAgKX1cIikuRGF0ZXRpbWUuZnJvbUlzbyhcIiR7dGhpcy50b0lzbygpfVwiKSlgO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhIHRpbWVzdGFtcCBvZiBub24tbGVhcCB5ZWFyIHNlY29uZHMgc2luY2UgZXBvY2hcbiAgICpcbiAgICogQHJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHRpbWVzdGFtcCBpbiBzZWNvbmRzXG4gICAqL1xuICBwdWJsaWMgZ2V0IHRpbWVzdGFtcCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcE1zIC8gMTAwMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSB0aW1lc3RhbXAgb2Ygbm9uLWxlYXAgeWVhciBtaWxsaXNlY29uZHMgc2luY2UgZXBvY2hcbiAgICpcbiAgICogQHJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHNcbiAgICovXG4gIHB1YmxpYyBnZXQgdGltZXN0YW1wTXMoKTogbnVtYmVyIHtcbiAgICAvLyBzaW5jZSBjb252ZXJ0aW5nIGJldHdlZW4gdGltZXpvbmVzLyBkZWNsYXJpbmcgYSBkYXRlIGluIGEgdGltZXpvbmUgb3RoZXIgdGhhbiB0aGUgbG9jYWwgb3IgVVRDXG4gICAgLy8gaXNuJ3QgbmF0aXZlIHRvIGpzLCB3ZSBrZWVwIHRoZSBkYXRlIGluIGEgVVRDIHRpbWUsIHRoZW4gcmV0cmlldmluZyBiYWNrIHRoZSB0aGUgb3JpZ2luYWwgdGltZXN0YW1wLFxuICAgIC8vIHRoaXMgd2F5IHRoZSBkYXRlIGNvbXBvbmVudHMgKGhvdXJzLCBtb250aCwgZGF5LCBtaW51dGVzLCBldGMuLikgYXJlIHBlcnNpc3RlbnRcbiAgICAvLyBhbmQgcmV0cmlldmVkIGluIHRoZSBzYW1lIG9yZGVyIGZvciBhbGwgb2YgdGhlIGRpZmZlcmVudCBjb25zdHJ1Y3RpbmcgbWV0aG9kcyBhbmQgdGhlIHRpbWVzdGFtcCBpcyBjb3JyZWN0LlxuICAgIHJldHVybiB0aGlzLl9kYXRlLnZhbHVlT2YoKSArIHRoaXMuX3RpbWV6b25lT2Zmc2V0ICogNjAgKiAxMDAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGhvdXIgb2YgdGhlIGxvY2FsIG1hY2hpbmUgdGltZSBvciBpbiB1dGNcbiAgICpcbiAgICogQHJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBkYXRldGltZSdzIGhvdXJcbiAgICovXG4gIHB1YmxpYyBnZXQgaG91cnMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0ZS5nZXRVVENIb3VycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1pbnV0ZSBvZiB0aGUgbG9jYWwgbWFjaGluZSB0aW1lIG9yIGluIHV0Y1xuICAgKlxuICAgKiBAcmV0dXJucyBhIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGRhdGV0aW1lJ3MgbWludXRlXG4gICAqL1xuICBwdWJsaWMgZ2V0IG1pbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRlLmdldFVUQ01pbnV0ZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzZWNvbmRzIG9mIHRoZSBsb2NhbCBtYWNoaW5lIHRpbWUgb3IgaW4gdXRjXG4gICAqXG4gICAqIEByZXR1cm5zIGEgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgZGF0ZXRpbWUncyBzZWNvbmRzXG4gICAqL1xuICBwdWJsaWMgZ2V0IHNlYygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRlLmdldFVUQ1NlY29uZHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtaWxsaXNlY29uZHMgb2YgdGhlIGxvY2FsIG1hY2hpbmUgdGltZSBvciBpbiB1dGNcbiAgICogICpcbiAgICogQHJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBkYXRldGltZSdzIG1pbGxpc2Vjb25kc1xuICAgKi9cbiAgcHVibGljIGdldCBtcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRheSBvZiBtb250aCBpbiB0aGUgbG9jYWwgbWFjaGluZSB0aW1lIG9yIGluIHV0YyAoMSAtIDMxKVxuICAgKlxuICAgKiBAcmV0dXJucyBhIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGRhdGV0aW1lJ3MgZGF5IG9mIG1vbnRoXG4gICAqL1xuICBwdWJsaWMgZ2V0IGRheU9mTW9udGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0ZS5nZXRVVENEYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGF5IGluIG1vbnRoIG9mIHRoZSBsb2NhbCBtYWNoaW5lIHRpbWUgb3IgaW4gdXRjICgwIC0gNilcbiAgICpcbiAgICogQHJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBkYXRldGltZSdzIGRheSBvZiB3ZWVrXG4gICAqL1xuICBwdWJsaWMgZ2V0IGRheU9mV2VlaygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRlLmdldFVUQ0RheSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1vbnRoIG9mIHRoZSBsb2NhbCBtYWNoaW5lIHRpbWUgb3IgaW4gdXRjICgwIC0gMTEpXG4gICAqXG4gICAqIEByZXR1cm5zIGEgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgZGF0ZXRpbWUncyBtb250aFxuICAgKi9cbiAgcHVibGljIGdldCBtb250aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRlLmdldFVUQ01vbnRoKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgeWVhciBvZiB0aGUgbG9jYWwgbWFjaGluZSB0aW1lIG9yIGluIHV0Y1xuICAgKlxuICAgKiBAcmV0dXJucyBhIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGRhdGV0aW1lJ3MgeWVhclxuICAgKi9cbiAgcHVibGljIGdldCB5ZWFyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBvZmZzZXQgaW4gbWludXRlcyBmcm9tIFVUQ1xuICAgKlxuICAgKiBAcmV0dXJucyBhIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGRhdGV0aW1lJ3Mgb2Zmc2V0IGluIG1pbnV0ZXMgZnJvbSBVVENcbiAgICovXG4gIHB1YmxpYyBnZXQgdGltZXpvbmUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fdGltZXpvbmVPZmZzZXQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIERhdGV0aW1lIHJlcHJlc2VudHMgdGhlIHNhbWUgZGF0ZSBpbiB1dGNcbiAgICpcbiAgICogQHJldHVybnMgYSBkYXRldGltZSByZXByZXNlbnRpbmcgdGhlIGRhdGV0aW1lJ3MgZGF0ZSBpbiBVVENcbiAgICovXG4gIHB1YmxpYyB0b1V0YygpOiBEYXRldGltZSB7XG4gICAgcmV0dXJuIG5ldyBEYXRldGltZShuZXcgRGF0ZSh0aGlzLnRpbWVzdGFtcE1zKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBJU08tODYwMSBzdHJpbmdcbiAgICpcbiAgICogQHJldHVybnMgYSBJU08tODYwMSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGRhdGV0aW1lXG4gICAqL1xuICBwdWJsaWMgdG9Jc28oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbmV3IERhdGUodGhpcy50aW1lc3RhbXBNcykudG9JU09TdHJpbmcoKTtcbiAgfVxufVxuIl19