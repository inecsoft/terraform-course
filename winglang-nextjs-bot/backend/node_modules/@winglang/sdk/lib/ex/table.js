"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.TableInflightMethods = exports.Table = exports.ColumnType = exports.TABLE_FQN = void 0;
const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
const constants_1 = require("../constants");
const errors_1 = require("../core/errors");
const types_1 = require("../core/types");
const std_1 = require("../std");
/**
 * Global identifier for `Table`.
 */
exports.TABLE_FQN = (0, constants_1.fqnForType)("ex.Table");
/**
 * Table column types
 */
var ColumnType;
(function (ColumnType) {
    /** String type */
    ColumnType[ColumnType["STRING"] = 0] = "STRING";
    /** Number type */
    ColumnType[ColumnType["NUMBER"] = 1] = "NUMBER";
    /** Bool type */
    ColumnType[ColumnType["BOOLEAN"] = 2] = "BOOLEAN";
    /** Date type */
    ColumnType[ColumnType["DATE"] = 3] = "DATE";
    /** Json type */
    ColumnType[ColumnType["JSON"] = 4] = "JSON";
})(ColumnType || (exports.ColumnType = ColumnType = {}));
/**
 * A NoSQL database table that can be used to store and query data.
 * @inflight `@winglang/sdk.ex.ITableClient`
 * @abstract
 */
class Table extends std_1.Resource {
    constructor(scope, id, props) {
        if (new.target === Table) {
            return std_1.Resource._newFromFactory(exports.TABLE_FQN, scope, id, props);
        }
        super(scope, id);
        std_1.Node.of(this).title = "Table";
        std_1.Node.of(this).description =
            "A cloud NoSQL database table that can be used to store and query data";
        if (!props.name) {
            throw new Error("Table name is not defined");
        }
        this.name = props.name;
        if (!props.primaryKey) {
            throw new Error("Primary Key is not defined");
        }
        this.primaryKey = props.primaryKey;
        if (!props.columns) {
            throw new Error("No column is defined");
        }
        this.columns = props.columns;
    }
    /** @internal */
    get _liftMap() {
        return {};
    }
    /**
     * Add a row to the table that is created when the app is deployed.
     * @abstract
     */
    addRow(key, row) {
        key;
        row;
        throw new errors_1.AbstractMemberError();
    }
}
exports.Table = Table;
_a = JSII_RTTI_SYMBOL_1;
Table[_a] = { fqn: "@winglang/sdk.ex.Table", version: "0.0.0" };
/**
 * List of inflight operations available for `Table`.
 * @internal
 */
var TableInflightMethods;
(function (TableInflightMethods) {
    /** `Table.insert` */
    TableInflightMethods["INSERT"] = "insert";
    /** `Table.insert` */
    TableInflightMethods["UPSERT"] = "upsert";
    /** `Table.update` */
    TableInflightMethods["UPDATE"] = "update";
    /** `Table.delete` */
    TableInflightMethods["DELETE"] = "delete";
    /** `Table.get` */
    TableInflightMethods["GET"] = "get";
    /** `Table.tryGet` */
    TableInflightMethods["TRYGET"] = "tryGet";
    /** `Table.list` */
    TableInflightMethods["LIST"] = "list";
})(TableInflightMethods || (exports.TableInflightMethods = TableInflightMethods = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZXgvdGFibGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSw0Q0FBMEM7QUFFMUMsMkNBQXFEO0FBQ3JELHlDQUFnRDtBQUNoRCxnQ0FBOEM7QUFFOUM7O0dBRUc7QUFDVSxRQUFBLFNBQVMsR0FBRyxJQUFBLHNCQUFVLEVBQUMsVUFBVSxDQUFDLENBQUM7QUFFaEQ7O0dBRUc7QUFDSCxJQUFZLFVBV1g7QUFYRCxXQUFZLFVBQVU7SUFDcEIsa0JBQWtCO0lBQ2xCLCtDQUFNLENBQUE7SUFDTixrQkFBa0I7SUFDbEIsK0NBQU0sQ0FBQTtJQUNOLGdCQUFnQjtJQUNoQixpREFBTyxDQUFBO0lBQ1AsZ0JBQWdCO0lBQ2hCLDJDQUFJLENBQUE7SUFDSixnQkFBZ0I7SUFDaEIsMkNBQUksQ0FBQTtBQUNOLENBQUMsRUFYVyxVQUFVLDBCQUFWLFVBQVUsUUFXckI7QUE2QkQ7Ozs7R0FJRztBQUNILE1BQWEsS0FBTSxTQUFRLGNBQVE7SUFnQmpDLFlBQVksS0FBZ0IsRUFBRSxFQUFVLEVBQUUsS0FBaUI7UUFDekQsSUFBSSxHQUFHLENBQUMsTUFBTSxLQUFLLEtBQUssRUFBRSxDQUFDO1lBQ3pCLE9BQU8sY0FBUSxDQUFDLGVBQWUsQ0FBQyxpQkFBUyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDL0QsQ0FBQztRQUVELEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFakIsVUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDO1FBQzlCLFVBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVztZQUN2Qix1RUFBdUUsQ0FBQztRQUUxRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2hCLE1BQU0sSUFBSSxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FBQztRQUMvQyxDQUFDO1FBQ0QsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDdEIsTUFBTSxJQUFJLEtBQUssQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1FBQ2hELENBQUM7UUFDRCxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUM7UUFFbkMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNuQixNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDMUMsQ0FBQztRQUNELElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQztJQUMvQixDQUFDO0lBRUQsZ0JBQWdCO0lBQ2hCLElBQVcsUUFBUTtRQUNqQixPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7SUFFRDs7O09BR0c7SUFDSSxNQUFNLENBQUMsR0FBVyxFQUFFLEdBQVM7UUFDbEMsR0FBRyxDQUFDO1FBQ0osR0FBRyxDQUFDO1FBQ0osTUFBTSxJQUFJLDRCQUFtQixFQUFFLENBQUM7SUFDbEMsQ0FBQzs7QUF2REgsc0JBd0RDOzs7QUF5REQ7OztHQUdHO0FBQ0gsSUFBWSxvQkFlWDtBQWZELFdBQVksb0JBQW9CO0lBQzlCLHFCQUFxQjtJQUNyQix5Q0FBaUIsQ0FBQTtJQUNqQixxQkFBcUI7SUFDckIseUNBQWlCLENBQUE7SUFDakIscUJBQXFCO0lBQ3JCLHlDQUFpQixDQUFBO0lBQ2pCLHFCQUFxQjtJQUNyQix5Q0FBaUIsQ0FBQTtJQUNqQixrQkFBa0I7SUFDbEIsbUNBQVcsQ0FBQTtJQUNYLHFCQUFxQjtJQUNyQix5Q0FBaUIsQ0FBQTtJQUNqQixtQkFBbUI7SUFDbkIscUNBQWEsQ0FBQTtBQUNmLENBQUMsRUFmVyxvQkFBb0Isb0NBQXBCLG9CQUFvQixRQWUvQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gXCJjb25zdHJ1Y3RzXCI7XG5pbXBvcnQgeyBmcW5Gb3JUeXBlIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTGlmdE1hcCB9IGZyb20gXCIuLi9jb3JlXCI7XG5pbXBvcnQgeyBBYnN0cmFjdE1lbWJlckVycm9yIH0gZnJvbSBcIi4uL2NvcmUvZXJyb3JzXCI7XG5pbXBvcnQgeyBJTkZMSUdIVF9TWU1CT0wgfSBmcm9tIFwiLi4vY29yZS90eXBlc1wiO1xuaW1wb3J0IHsgSnNvbiwgTm9kZSwgUmVzb3VyY2UgfSBmcm9tIFwiLi4vc3RkXCI7XG5cbi8qKlxuICogR2xvYmFsIGlkZW50aWZpZXIgZm9yIGBUYWJsZWAuXG4gKi9cbmV4cG9ydCBjb25zdCBUQUJMRV9GUU4gPSBmcW5Gb3JUeXBlKFwiZXguVGFibGVcIik7XG5cbi8qKlxuICogVGFibGUgY29sdW1uIHR5cGVzXG4gKi9cbmV4cG9ydCBlbnVtIENvbHVtblR5cGUge1xuICAvKiogU3RyaW5nIHR5cGUgKi9cbiAgU1RSSU5HLFxuICAvKiogTnVtYmVyIHR5cGUgKi9cbiAgTlVNQkVSLFxuICAvKiogQm9vbCB0eXBlICovXG4gIEJPT0xFQU4sXG4gIC8qKiBEYXRlIHR5cGUgKi9cbiAgREFURSxcbiAgLyoqIEpzb24gdHlwZSAqL1xuICBKU09OLFxufVxuXG4vKipcbiAqIFByb3BlcnRpZXMgZm9yIGBUYWJsZWAuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGFibGVQcm9wcyB7XG4gIC8qKlxuICAgKiBUaGUgdGFibGUncyBuYW1lLlxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHJlYWRvbmx5IG5hbWU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdGFibGUncyBjb2x1bW5zLlxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHJlYWRvbmx5IGNvbHVtbnM/OiB7IFtrZXk6IHN0cmluZ106IENvbHVtblR5cGUgfTtcbiAgLyoqXG4gICAqIFRoZSB0YWJsZSdzIHByaW1hcnkga2V5LiBObyB0d28gcm93cyBjYW4gaGF2ZSB0aGUgc2FtZSB2YWx1ZSBmb3IgdGhlXG4gICAqIHByaW1hcnkga2V5LlxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHJlYWRvbmx5IHByaW1hcnlLZXk/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdGFibGUncyBpbml0aWFsIHJvd3MuXG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgcmVhZG9ubHkgaW5pdGlhbFJvd3M/OiB7IFtrZXk6IHN0cmluZ106IEpzb24gfTtcbn1cblxuLyoqXG4gKiBBIE5vU1FMIGRhdGFiYXNlIHRhYmxlIHRoYXQgY2FuIGJlIHVzZWQgdG8gc3RvcmUgYW5kIHF1ZXJ5IGRhdGEuXG4gKiBAaW5mbGlnaHQgYEB3aW5nbGFuZy9zZGsuZXguSVRhYmxlQ2xpZW50YFxuICogQGFic3RyYWN0XG4gKi9cbmV4cG9ydCBjbGFzcyBUYWJsZSBleHRlbmRzIFJlc291cmNlIHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgW0lORkxJR0hUX1NZTUJPTF0/OiBJVGFibGVDbGllbnQ7XG4gIC8qKlxuICAgKiBUYWJsZSBuYW1lXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgbmFtZSE6IHN0cmluZztcbiAgLyoqXG4gICAqIFRhYmxlIHByaW1hcnkga2V5IG5hbWVcbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBwcmltYXJ5S2V5ITogc3RyaW5nO1xuICAvKipcbiAgICogVGFibGUgY29sdW1uc1xuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IGNvbHVtbnMhOiB7IFtrZXk6IHN0cmluZ106IENvbHVtblR5cGUgfTtcblxuICBjb25zdHJ1Y3RvcihzY29wZTogQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wczogVGFibGVQcm9wcykge1xuICAgIGlmIChuZXcudGFyZ2V0ID09PSBUYWJsZSkge1xuICAgICAgcmV0dXJuIFJlc291cmNlLl9uZXdGcm9tRmFjdG9yeShUQUJMRV9GUU4sIHNjb3BlLCBpZCwgcHJvcHMpO1xuICAgIH1cblxuICAgIHN1cGVyKHNjb3BlLCBpZCk7XG5cbiAgICBOb2RlLm9mKHRoaXMpLnRpdGxlID0gXCJUYWJsZVwiO1xuICAgIE5vZGUub2YodGhpcykuZGVzY3JpcHRpb24gPVxuICAgICAgXCJBIGNsb3VkIE5vU1FMIGRhdGFiYXNlIHRhYmxlIHRoYXQgY2FuIGJlIHVzZWQgdG8gc3RvcmUgYW5kIHF1ZXJ5IGRhdGFcIjtcblxuICAgIGlmICghcHJvcHMubmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGFibGUgbmFtZSBpcyBub3QgZGVmaW5lZFwiKTtcbiAgICB9XG4gICAgdGhpcy5uYW1lID0gcHJvcHMubmFtZTtcbiAgICBpZiAoIXByb3BzLnByaW1hcnlLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlByaW1hcnkgS2V5IGlzIG5vdCBkZWZpbmVkXCIpO1xuICAgIH1cbiAgICB0aGlzLnByaW1hcnlLZXkgPSBwcm9wcy5wcmltYXJ5S2V5O1xuXG4gICAgaWYgKCFwcm9wcy5jb2x1bW5zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb2x1bW4gaXMgZGVmaW5lZFwiKTtcbiAgICB9XG4gICAgdGhpcy5jb2x1bW5zID0gcHJvcHMuY29sdW1ucztcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHVibGljIGdldCBfbGlmdE1hcCgpOiBMaWZ0TWFwIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgcm93IHRvIHRoZSB0YWJsZSB0aGF0IGlzIGNyZWF0ZWQgd2hlbiB0aGUgYXBwIGlzIGRlcGxveWVkLlxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIHB1YmxpYyBhZGRSb3coa2V5OiBzdHJpbmcsIHJvdzogSnNvbik6IHZvaWQge1xuICAgIGtleTtcbiAgICByb3c7XG4gICAgdGhyb3cgbmV3IEFic3RyYWN0TWVtYmVyRXJyb3IoKTtcbiAgfVxufVxuXG4vKipcbiAqIEluZmxpZ2h0IGludGVyZmFjZSBmb3IgYFRhYmxlYC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJVGFibGVDbGllbnQge1xuICAvKipcbiAgICogSW5zZXJ0IGEgcm93IGludG8gdGhlIHRhYmxlLlxuICAgKiBAcGFyYW0ga2V5IHByaW1hcnkga2V5IHRvIGluc2VydCB0aGUgcm93LlxuICAgKiBAcGFyYW0gcm93IGRhdGEgdG8gYmUgaW5zZXJ0ZWQuXG4gICAqIEBpbmZsaWdodFxuICAgKi9cbiAgaW5zZXJ0KGtleTogc3RyaW5nLCByb3c6IEpzb24pOiBQcm9taXNlPHZvaWQ+O1xuICAvKipcbiAgICogSW5zZXJ0IGEgcm93IGludG8gdGhlIHRhYmxlIGlmIGl0IGRvZXNuJ3QgZXhpc3QsIG90aGVyd2lzZSB1cGRhdGUgaXQuXG4gICAqIEBwYXJhbSBrZXkgcHJpbWFyeSBrZXkgdG8gdXBzZXJ0IHRoZSByb3cuXG4gICAqIEBwYXJhbSByb3cgZGF0YSB0byBiZSB1cHNlcnRlZC5cbiAgICogQGluZmxpZ2h0XG4gICAqL1xuICB1cHNlcnQoa2V5OiBzdHJpbmcsIHJvdzogSnNvbik6IFByb21pc2U8dm9pZD47XG4gIC8qKlxuICAgKiBVcGRhdGUgYSByb3cgaW4gdGhlIHRhYmxlLlxuICAgKiBAcGFyYW0ga2V5IHByaW1hcnkga2V5IHRvIHVwZGF0ZSB0aGUgcm93LlxuICAgKiBAcGFyYW0gcm93IGRhdGEgdG8gYmUgdXBkYXRlZC5cbiAgICogQGluZmxpZ2h0XG4gICAqL1xuICB1cGRhdGUoa2V5OiBzdHJpbmcsIHJvdzogSnNvbik6IFByb21pc2U8dm9pZD47XG4gIC8qKlxuICAgKiBEZWxldGUgYSByb3cgZnJvbSB0aGUgdGFibGUsIGJ5IHByaW1hcnkga2V5LlxuICAgKiBAcGFyYW0ga2V5IHByaW1hcnkga2V5IHRvIGRlbGV0ZSB0aGUgcm93LlxuICAgKiBAaW5mbGlnaHRcbiAgICovXG4gIGRlbGV0ZShrZXk6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gIC8qKlxuICAgKiBHZXQgYSByb3cgZnJvbSB0aGUgdGFibGUsIGJ5IHByaW1hcnkga2V5LlxuICAgKiBAcGFyYW0ga2V5IHByaW1hcnkga2V5IHRvIHNlYXJjaC5cbiAgICogQHJldHVybnMgZ2V0IHRoZSByb3cgZnJvbSB0YWJsZS5cbiAgICogQHRocm93cyBpZiBubyByb3cgd2l0aCB0aGUgZ2l2ZW4ga2V5IGV4aXN0cy5cbiAgICogQGluZmxpZ2h0XG4gICAqL1xuICBnZXQoa2V5OiBzdHJpbmcpOiBQcm9taXNlPEpzb24+O1xuICAvKipcbiAgICogR2V0IGEgcm93IGZyb20gdGhlIHRhYmxlIGlmIGV4aXN0cywgYnkgcHJpbWFyeSBrZXkuXG4gICAqIEBwYXJhbSBrZXkgcHJpbWFyeSBrZXkgdG8gc2VhcmNoLlxuICAgKiBAcmV0dXJucyBnZXQgdGhlIHJvdyBmcm9tIHRhYmxlIGlmIGl0IGV4aXN0cywgbmlsIG90aGVyd2lzZS5cbiAgICogQGluZmxpZ2h0XG4gICAqL1xuICB0cnlHZXQoa2V5OiBzdHJpbmcpOiBQcm9taXNlPEpzb24gfCB1bmRlZmluZWQ+O1xuICAvKipcbiAgICogTGlzdCBhbGwgcm93cyBpbiB0aGUgdGFibGUuXG4gICAqIEByZXR1cm5zIGxpc3QgYWxsIHJvdy5cbiAgICogQGluZmxpZ2h0XG4gICAqL1xuICAvLyBUT0RPOiBjaGFuZ2UgdGhlIHJldHVybiB0eXBlIHRvIEl0ZXJhdG9yPE1hcDxzdHJpbmcsIEpzb24+PiBpbiB0aGUgZnV0dXJlLlxuICBsaXN0KCk6IFByb21pc2U8QXJyYXk8SnNvbj4+O1xufVxuXG4vKipcbiAqIExpc3Qgb2YgaW5mbGlnaHQgb3BlcmF0aW9ucyBhdmFpbGFibGUgZm9yIGBUYWJsZWAuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGVudW0gVGFibGVJbmZsaWdodE1ldGhvZHMge1xuICAvKiogYFRhYmxlLmluc2VydGAgKi9cbiAgSU5TRVJUID0gXCJpbnNlcnRcIixcbiAgLyoqIGBUYWJsZS5pbnNlcnRgICovXG4gIFVQU0VSVCA9IFwidXBzZXJ0XCIsXG4gIC8qKiBgVGFibGUudXBkYXRlYCAqL1xuICBVUERBVEUgPSBcInVwZGF0ZVwiLFxuICAvKiogYFRhYmxlLmRlbGV0ZWAgKi9cbiAgREVMRVRFID0gXCJkZWxldGVcIixcbiAgLyoqIGBUYWJsZS5nZXRgICovXG4gIEdFVCA9IFwiZ2V0XCIsXG4gIC8qKiBgVGFibGUudHJ5R2V0YCAqL1xuICBUUllHRVQgPSBcInRyeUdldFwiLFxuICAvKiogYFRhYmxlLmxpc3RgICovXG4gIExJU1QgPSBcImxpc3RcIixcbn1cbiJdfQ==