"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.OnDeploy = void 0;
const simulator_1 = require("../simulator/simulator");
class OnDeploy {
    constructor(props) {
        this.functionHandle = props.functionHandle;
    }
    async init(context) {
        const functionClient = context.getClient(this.functionHandle, true);
        await context.withTrace({
            message: "OnDeploy invoked.",
            activity: async () => {
                return functionClient.invoke();
            },
        });
        return {};
    }
    async cleanup() { }
    async save() { }
    async plan() {
        // OnDeploy runs on every deployment, so always replace
        return simulator_1.UpdatePlan.REPLACE;
    }
}
exports.OnDeploy = OnDeploy;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib24tZGVwbG95LmluZmxpZ2h0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3RhcmdldC1zaW0vb24tZGVwbG95LmluZmxpZ2h0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVBLHNEQUlnQztBQUVoQyxNQUFhLFFBQVE7SUFHbkIsWUFBbUIsS0FBcUI7UUFDdEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUMsY0FBYyxDQUFDO0lBQzdDLENBQUM7SUFFTSxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQTBCO1FBQzFDLE1BQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQ3RDLElBQUksQ0FBQyxjQUFjLEVBQ25CLElBQUksQ0FDYyxDQUFDO1FBQ3JCLE1BQU0sT0FBTyxDQUFDLFNBQVMsQ0FBQztZQUN0QixPQUFPLEVBQUUsbUJBQW1CO1lBQzVCLFFBQVEsRUFBRSxLQUFLLElBQUksRUFBRTtnQkFDbkIsT0FBTyxjQUFjLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDakMsQ0FBQztTQUNGLENBQUMsQ0FBQztRQUNILE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQztJQUVNLEtBQUssQ0FBQyxPQUFPLEtBQW1CLENBQUM7SUFFakMsS0FBSyxDQUFDLElBQUksS0FBbUIsQ0FBQztJQUU5QixLQUFLLENBQUMsSUFBSTtRQUNmLHVEQUF1RDtRQUN2RCxPQUFPLHNCQUFVLENBQUMsT0FBTyxDQUFDO0lBQzVCLENBQUM7Q0FDRjtBQTdCRCw0QkE2QkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPbkRlcGxveUF0dHJpYnV0ZXMsIE9uRGVwbG95U2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hLXJlc291cmNlc1wiO1xuaW1wb3J0IHsgSUZ1bmN0aW9uQ2xpZW50LCBJT25EZXBsb3lDbGllbnQgfSBmcm9tIFwiLi4vY2xvdWRcIjtcbmltcG9ydCB7XG4gIElTaW11bGF0b3JDb250ZXh0LFxuICBJU2ltdWxhdG9yUmVzb3VyY2VJbnN0YW5jZSxcbiAgVXBkYXRlUGxhbixcbn0gZnJvbSBcIi4uL3NpbXVsYXRvci9zaW11bGF0b3JcIjtcblxuZXhwb3J0IGNsYXNzIE9uRGVwbG95IGltcGxlbWVudHMgSU9uRGVwbG95Q2xpZW50LCBJU2ltdWxhdG9yUmVzb3VyY2VJbnN0YW5jZSB7XG4gIHByaXZhdGUgZnVuY3Rpb25IYW5kbGU6IHN0cmluZztcblxuICBwdWJsaWMgY29uc3RydWN0b3IocHJvcHM6IE9uRGVwbG95U2NoZW1hKSB7XG4gICAgdGhpcy5mdW5jdGlvbkhhbmRsZSA9IHByb3BzLmZ1bmN0aW9uSGFuZGxlO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGluaXQoY29udGV4dDogSVNpbXVsYXRvckNvbnRleHQpOiBQcm9taXNlPE9uRGVwbG95QXR0cmlidXRlcz4ge1xuICAgIGNvbnN0IGZ1bmN0aW9uQ2xpZW50ID0gY29udGV4dC5nZXRDbGllbnQoXG4gICAgICB0aGlzLmZ1bmN0aW9uSGFuZGxlLFxuICAgICAgdHJ1ZVxuICAgICkgYXMgSUZ1bmN0aW9uQ2xpZW50O1xuICAgIGF3YWl0IGNvbnRleHQud2l0aFRyYWNlKHtcbiAgICAgIG1lc3NhZ2U6IFwiT25EZXBsb3kgaW52b2tlZC5cIixcbiAgICAgIGFjdGl2aXR5OiBhc3luYyAoKSA9PiB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbkNsaWVudC5pbnZva2UoKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHt9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGNsZWFudXAoKTogUHJvbWlzZTx2b2lkPiB7fVxuXG4gIHB1YmxpYyBhc3luYyBzYXZlKCk6IFByb21pc2U8dm9pZD4ge31cblxuICBwdWJsaWMgYXN5bmMgcGxhbigpIHtcbiAgICAvLyBPbkRlcGxveSBydW5zIG9uIGV2ZXJ5IGRlcGxveW1lbnQsIHNvIGFsd2F5cyByZXBsYWNlXG4gICAgcmV0dXJuIFVwZGF0ZVBsYW4uUkVQTEFDRTtcbiAgfVxufVxuIl19