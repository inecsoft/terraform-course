"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.TerraformResourceTargets = void 0;
const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
/**
 * Copyright (c) HashiCorp, Inc.
 * SPDX-License-Identifier: MPL-2.0
 */
const errors_1 = require("./errors");
/**
 *
 */
class TerraformResourceTargets {
    constructor() {
        this._resourceTargetMap = new Map();
    }
    prettyPrintEntries() {
        return [...this._resourceTargetMap.entries()].reduce((accum, curr) => accum + "\n" + `${curr[0]}: ${curr[1].friendlyUniqueId}`, "");
    }
    addResourceTarget(resource, target) {
        if (this._resourceTargetMap.has(target)) {
            throw (0, errors_1.moveTargetAlreadySet)(target, this._resourceTargetMap.get(target)?.friendlyUniqueId);
        }
        this._resourceTargetMap.set(target, resource);
    }
    getResourceByTarget(target) {
        const result = this._resourceTargetMap.get(target);
        if (!result) {
            throw (0, errors_1.moveTargetNotSet)(target, this.prettyPrintEntries());
        }
        return result;
    }
}
exports.TerraformResourceTargets = TerraformResourceTargets;
_a = JSII_RTTI_SYMBOL_1;
TerraformResourceTargets[_a] = { fqn: "cdktf.TerraformResourceTargets", version: "0.20.7" };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVycmFmb3JtLXJlc291cmNlLXRhcmdldHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0ZXJyYWZvcm0tcmVzb3VyY2UtdGFyZ2V0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7R0FHRztBQUVILHFDQUFrRTtBQUdsRTs7R0FFRztBQUNILE1BQWEsd0JBQXdCO0lBQXJDO1FBQ1UsdUJBQWtCLEdBQW1DLElBQUksR0FBRyxFQUdqRSxDQUFDO0tBMEJMO0lBeEJTLGtCQUFrQjtRQUN4QixPQUFPLENBQUMsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQ2xELENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxHQUFHLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsRUFDekUsRUFBRSxDQUNILENBQUM7SUFDSixDQUFDO0lBRU0saUJBQWlCLENBQUMsUUFBMkIsRUFBRSxNQUFjO1FBQ2xFLElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO1lBQ3hDLE1BQU0sSUFBQSw2QkFBb0IsRUFDeEIsTUFBTSxFQUNOLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsZ0JBQWdCLENBQ3RELENBQUM7UUFDSixDQUFDO1FBQ0QsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDaEQsQ0FBQztJQUVNLG1CQUFtQixDQUFDLE1BQWM7UUFDdkMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDWixNQUFNLElBQUEseUJBQWdCLEVBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUM7UUFDNUQsQ0FBQztRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7O0FBN0JILDREQThCQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBIYXNoaUNvcnAsIEluYy5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNUEwtMi4wXG4gKi9cblxuaW1wb3J0IHsgbW92ZVRhcmdldEFscmVhZHlTZXQsIG1vdmVUYXJnZXROb3RTZXQgfSBmcm9tIFwiLi9lcnJvcnNcIjtcbmltcG9ydCB7IFRlcnJhZm9ybVJlc291cmNlIH0gZnJvbSBcIi4vdGVycmFmb3JtLXJlc291cmNlXCI7XG5cbi8qKlxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIFRlcnJhZm9ybVJlc291cmNlVGFyZ2V0cyB7XG4gIHByaXZhdGUgX3Jlc291cmNlVGFyZ2V0TWFwOiBNYXA8c3RyaW5nLCBUZXJyYWZvcm1SZXNvdXJjZT4gPSBuZXcgTWFwPFxuICAgIHN0cmluZyxcbiAgICBUZXJyYWZvcm1SZXNvdXJjZVxuICA+KCk7XG5cbiAgcHJpdmF0ZSBwcmV0dHlQcmludEVudHJpZXMoKSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLl9yZXNvdXJjZVRhcmdldE1hcC5lbnRyaWVzKCldLnJlZHVjZShcbiAgICAgIChhY2N1bSwgY3VycikgPT4gYWNjdW0gKyBcIlxcblwiICsgYCR7Y3VyclswXX06ICR7Y3VyclsxXS5mcmllbmRseVVuaXF1ZUlkfWAsXG4gICAgICBcIlwiXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRSZXNvdXJjZVRhcmdldChyZXNvdXJjZTogVGVycmFmb3JtUmVzb3VyY2UsIHRhcmdldDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3Jlc291cmNlVGFyZ2V0TWFwLmhhcyh0YXJnZXQpKSB7XG4gICAgICB0aHJvdyBtb3ZlVGFyZ2V0QWxyZWFkeVNldChcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICB0aGlzLl9yZXNvdXJjZVRhcmdldE1hcC5nZXQodGFyZ2V0KT8uZnJpZW5kbHlVbmlxdWVJZFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5fcmVzb3VyY2VUYXJnZXRNYXAuc2V0KHRhcmdldCwgcmVzb3VyY2UpO1xuICB9XG5cbiAgcHVibGljIGdldFJlc291cmNlQnlUYXJnZXQodGFyZ2V0OiBzdHJpbmcpOiBUZXJyYWZvcm1SZXNvdXJjZSB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcmVzb3VyY2VUYXJnZXRNYXAuZ2V0KHRhcmdldCk7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHRocm93IG1vdmVUYXJnZXROb3RTZXQodGFyZ2V0LCB0aGlzLnByZXR0eVByaW50RW50cmllcygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuIl19